<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>6&nbsp;API documentation</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">whatnow</span>:<span class="mywbr"> &nbsp;</span> Hut23 project scheduling</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Usage.html" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Configuration.html" class="tocviewlink" data-pltdoc="x">Configuration</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Data_types_and_utilities.html" class="tocviewlink" data-pltdoc="x">Data types and utilities</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="The_current_schedule.html" class="tocviewlink" data-pltdoc="x">The current schedule</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Backends.html" class="tocviewlink" data-pltdoc="x">Backends</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="API_documentation.html" class="tocviewselflink" data-pltdoc="x">API documentation</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>6&nbsp;</td><td><a href="API_documentation.html" class="tocviewselflink" data-pltdoc="x">API documentation</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="API_documentation.html#%28part._.Forecast%29" class="tocviewlink" data-pltdoc="x">Forecast</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#%28part._.Forecast%29" class="tocsubseclink" data-pltdoc="x">Forecast</a></td></tr><tr><td><span class="tocsublinknumber">6.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Connecting_to_.Forecast%29" class="tocsubseclink" data-pltdoc="x">Connecting to Forecast</a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._connect%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="badlink"><span class="RktValLink">connect</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.1.2<tt>&nbsp;</tt></span><a href="#%28part._requests%29" class="tocsubseclink" data-pltdoc="x">Requesting data from Forecast</a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._get-people%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>people</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._get-placeholders%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>placeholders</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._get-projects%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>projects</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._get-clients%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>clients</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._whatnow%2Fapi%2Fforecast-json..rkt%29._get-assignments%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>assignments</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.2</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Backends.html" title="backward to &quot;5 Backends&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;whatnow: Hut23 project scheduling&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>6<tt>&nbsp;</tt><a name="(part._.A.P.I_documentation)"></a>API documentation</h3><h4>6.1<tt>&nbsp;</tt><a name="(part._.Forecast)"></a><a name="(mod-path._whatnow/api/forecast-json)"></a>Forecast</h4><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="API_documentation.html#%28mod-path._whatnow%2Fapi%2Fforecast-json%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">whatnow/api/forecast-json</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The
<a href="API_documentation.html#%28mod-path._whatnow%2Fapi%2Fforecast-json%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">whatnow/api/forecast-json</span></a> library provides procedures for
accessing the data stored on Forecast.</div></p><p><a href="https://forecastapp.com">Forecast</a> is our SaaS system for recording
current and future project assignments. We typically &ldquo;bill&rdquo; projects based on
the allocations in Forecast. Forecast manages five primary kinds of entity
(along with some others that are not exposed by this interface):</p><ol><li><p><a name="(tech._person)"></a><span style="font-style: italic">Person</span></p><p>A person represents an individual who is able to be assigned to
projects. Such an individual will have an account on Forecast and an
email address.</p></li><li><p><a name="(tech._placeholder)"></a><span style="font-style: italic">Placeholder</span></p><p>A placeholder is an entity that is treated like a <a href="API_documentation.html#%28tech._person%29" class="techoutside" data-pltdoc="x"><span class="techinside">person</span></a> for the
purpose of assignments to <a href="API_documentation.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">projects</span></a> but which does not represent
an individual in the real world. We use placeholders to hold project
<a href="API_documentation.html#%28tech._assignment%29" class="techoutside" data-pltdoc="x"><span class="techinside">assignments</span></a> where we have not yet decided on the individual to be
assigned; as well as <a href="API_documentation.html#%28tech._assignment%29" class="techoutside" data-pltdoc="x"><span class="techinside">assignments</span></a> representing a number of
possible individuals, such as those from a particular partner, where,
again, we are not sure who it will be.</p><p>Forecast provides placeholders in addition to persons because it bills
us based on the number of persons. However, it also restricts the number
of <a href="API_documentation.html#%28tech._placeholder%29" class="techoutside" data-pltdoc="x"><span class="techinside">placeholders</span></a> to be a fraction of the number of <a href="API_documentation.html#%28tech._person%29" class="techoutside" data-pltdoc="x"><span class="techinside">persons</span></a>,
as well as the total assignments to a specific placeholder.</p></li><li><p><a name="(tech._project)"></a><span style="font-style: italic">Project</span></p><p>A project corresponding to a unique GitHub issue on the Project Tracker.</p></li><li><p><a name="(tech._client)"></a><span style="font-style: italic">Client</span></p><p>A single level grouping of <a href="API_documentation.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">projects</span></a>. We use clients mainly to
correspond to Turing Programmes.</p></li><li><p><a name="(tech._assignment)"></a><span style="font-style: italic">Assignment</span></p><p>A contiguous range of days for which a <a href="API_documentation.html#%28tech._person%29" class="techoutside" data-pltdoc="x"><span class="techinside">person</span></a> is assigned to a
<a href="API_documentation.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">project</span></a>.</p></li></ol><p>With very few exceptions a project is individuated by a GitHub issue number. The
exceptions are certain &lsquo;global&rsquo; projects, which we use to manage
availability.</p><p>As of the time of writing, Forecast does not have an official API. However,
there is an undocumented REST endpoint and there are libraries written against
this endpoint in
<a href="https://www.npmjs.com/package/forecast-promise">Node.js</a>,
<a href="https://github.com/joefitzgerald/forecast">Go</a>, and
<a href="https://github.com/xvilo/harvest-forecast">PHP</a>. The rest of this
note tries to document the undocumented API.</p><h5>6.1.1<tt>&nbsp;</tt><a name="(part._.Connecting_to_.Forecast)"></a>Connecting to Forecast</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._connect))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="badlink"><span class="RktValLink">connect</span></span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">account-id</span><span class="hspace">&nbsp;</span><span class="RktVar">access-token</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">account-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">access-token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a structure representing a connnection
to the Forecast server, given the appropriate authentication details.</div></p><p><div class="SIntrapara">The account id is most easily found by logging in via the web interface and
reading the number that appears in the URL just after the server name. To obtain
an authentication token you will need to log in to <span class="emph">Harvest</span> and look for
the &ldquo;Developers&rdquo; section, within which there will be an option to obtain a
&ldquo;Personal Access Token.&rdquo; </div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The Forecast server&rsquo;s URL is hardcoded
(in <span class="RktVal">"whatnow/api/local-config.rkt"</span>) as
<a href="https://api.forecastapp.com"><span class="url">https://api.forecastapp.com</span></a></p></blockquote></blockquote></blockquote></div></p><p>Now obtain a connection with a call to <span class="RktSym"><span class="badlink"><span class="RktValLink">connect</span></span></span> and use one of request
forms described in <a href="API_documentation.html#%28part._requests%29" data-pltdoc="x">Requesting data from Forecast</a>.</p><h5>6.1.2<tt>&nbsp;</tt><a name="(part._requests)"></a>Requesting data from Forecast</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._get-people))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="RktSymDef RktSym">get-people</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/json/index.html#%28def._%28%28lib._json%2Fmain..rkt%29._jsexpr~3f%29%29" class="RktValLink" data-pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://docs.racket-lang.org/json/index.html#%28tech._jsexpr%29" class="techoutside" data-pltdoc="x"><span class="techinside">jsexpr</span></a>
containing details of all <a href="API_documentation.html#%28tech._person%29" class="techoutside" data-pltdoc="x"><span class="techinside">persons</span></a>.</div></p><p>The return value is a list of people. Each person is a dictionary with the
following keys and values.</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p>Key</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p>JSON type of value</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td align="right" style="border-bottom: 1px solid black;"><p>Example</p></td></tr><tr><td><p><span class="stt">id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">harvest_user_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">first_name</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>James</p></td></tr><tr><td><p><span class="stt">last_name</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>Geddes</p></td></tr><tr><td><p><span class="stt">email</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>jgeddes@turing.ac.uk</p></td></tr><tr><td><p><span class="stt">avatar_url</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">login</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>enabled</p></td></tr><tr><td><p><span class="stt">admin</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">archived</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">color_blind</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">roles</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">array</span> of <span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">weekly_capacity</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>144000</p></td></tr><tr><td><p><span class="stt">working_days</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">dict</span> of <span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">personal_feed_token_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>?</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">null</span></p></td></tr><tr><td><p><span class="stt">subscribed</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">updated_at</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span> (timestamp)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2020-04-08T13:46:01.840Z</p></td></tr><tr><td><p><span class="stt">updated_by_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr></table></p><p>The following fields may not be obvious. Harvest has its own database of
users&#8212;<wbr></wbr>even though they are the same users&#8212;<wbr></wbr>and <span class="stt">harvest_user_id</span> connects
the user on Forecast with their doppleg&#228;nger on Harvest. The elements of the
array in <span class="stt">roles</span> are user-defined strings (such as &ldquo;REG Permanent&rdquo;) that
are listed in the resource <span class="stt">roles</span> (although, oddly, they are given here as
their descriptions, rather than their ids in that resource). The weekly
availabilty <span class="stt">weekly_capacity</span> is given in seconds. The keys of the dictionary
<span class="stt">working_days</span> are "monday", "tuesday", and so on, and the values are
boolean.</p><p>The meanings of <span class="stt">login</span>, <span class="stt">personal_feed_token_id</span>, and
<span class="stt">subscribed</span> are unknown.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._get-placeholders))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="RktSymDef RktSym">get-placeholders</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/json/index.html#%28def._%28%28lib._json%2Fmain..rkt%29._jsexpr~3f%29%29" class="RktValLink" data-pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://docs.racket-lang.org/json/index.html#%28tech._jsexpr%29" class="techoutside" data-pltdoc="x"><span class="techinside">jsexpr</span></a>
containing details of all <a href="API_documentation.html#%28tech._placeholder%29" class="techoutside" data-pltdoc="x"><span class="techinside">placeholders</span></a>.</div></p><p>The return value is a list of placeholders. Each placeholder is a dictionary with the
following keys and values.</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p>Key</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p>JSON type of value</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td align="right" style="border-bottom: 1px solid black;"><p>Example</p></td></tr><tr><td><p><span class="stt">id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>23092</p></td></tr><tr><td><p><span class="stt">name</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>Resource Required 1</p></td></tr><tr><td><p><span class="stt">archived</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">false</span></p></td></tr><tr><td><p><span class="stt">roles</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">array</span> of <span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>["Placeholder"]</p></td></tr><tr><td><p><span class="stt">updated_at</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span> (timestamp)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">updated_by_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._get-projects))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="RktSymDef RktSym">get-projects</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/json/index.html#%28def._%28%28lib._json%2Fmain..rkt%29._jsexpr~3f%29%29" class="RktValLink" data-pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://docs.racket-lang.org/json/index.html#%28tech._jsexpr%29" class="techoutside" data-pltdoc="x"><span class="techinside">jsexpr</span></a>
containing details of all <a href="API_documentation.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">projects</span></a>.</div></p><p>The return value is a list of projects. Each project is a dictionary with the
following keys and values.</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p>Key</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p>JSON type of value</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td align="right" style="border-bottom: 1px solid black;"><p>Example</p></td></tr><tr><td><p><span class="stt">id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>1824209</p></td></tr><tr><td><p><span class="stt">harvest_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>19058649</p></td></tr><tr><td><p><span class="stt">client_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>781285</p></td></tr><tr><td><p><span class="stt">name</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>Nocell - Phase 1</p></td></tr><tr><td><p><span class="stt">code</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>hut23-266</p></td></tr><tr><td><p><span class="stt">start_date</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2018-11-01</p></td></tr><tr><td><p><span class="stt">end_date</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2019-05-31</p></td></tr><tr><td><p><span class="stt">tags</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">array</span> of <span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>GitHub:266, R-SPET-103</p></td></tr><tr><td><p><span class="stt">color</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>orange</p></td></tr><tr><td><p><span class="stt">notes</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">null</span></p></td></tr><tr><td><p><span class="stt">archived</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">false</span></p></td></tr><tr><td><p><span class="stt">updated_at</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span> (timestamp)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">updated_by_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr></table></p><p>Most of these fields are self-explanatory (or anyway we have guessed
them). Harvest has its own database of projects&#8212;<wbr></wbr>even though they are the same
users&#8212;<wbr></wbr>and <span class="stt">harvest_id</span> connects the project on Forecast with the same
project on Harvest. The <span class="stt">client_id</span> refers to the <span class="emph">client</span>, a grouping
of projects (which we use to identify the Programme). We use the <span class="stt">code</span> to
store the GitHub issue number: all projects must have an issue number although
of course this is not enforced by Forecast. The <span class="stt">tags</span> are a list of
user-assigned tags, which we use in particular to store the &lsquo;Finance project
code&rsquo; when we know it. (It is identified only by being of this particular form
as other tags may be present in the list.) We occasionally use the <span class="stt">notes</span>
field to store a link to the issue on GitHub.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._get-clients))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="RktSymDef RktSym">get-clients</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/json/index.html#%28def._%28%28lib._json%2Fmain..rkt%29._jsexpr~3f%29%29" class="RktValLink" data-pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://docs.racket-lang.org/json/index.html#%28tech._jsexpr%29" class="techoutside" data-pltdoc="x"><span class="techinside">jsexpr</span></a>
containing details of all <a href="API_documentation.html#%28tech._client%29" class="techoutside" data-pltdoc="x"><span class="techinside">clients</span></a>.</div></p><p>The return value is a list of clients. Each clients is a dictionary with the
following keys and values.</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p>Key</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p>JSON type of value</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td align="right" style="border-bottom: 1px solid black;"><p>Example</p></td></tr><tr><td><p><span class="stt">id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>769467</p></td></tr><tr><td><p><span class="stt">name</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>Health</p></td></tr><tr><td><p><span class="stt">harvest_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>7394382</p></td></tr><tr><td><p><span class="stt">archived</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">false</span></p></td></tr><tr><td><p><span class="stt">updated_at</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span> (timestamp)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p></p></td></tr><tr><td><p><span class="stt">updated_by_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>399979</p></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._whatnow/api/forecast-json..rkt)._get-assignments))"></a><span title="Provided from: whatnow/api/forecast-json"><span class="RktSym"><span class="RktSymDef RktSym">get-assignments</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/json/index.html#%28def._%28%28lib._json%2Fmain..rkt%29._jsexpr~3f%29%29" class="RktValLink" data-pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://docs.racket-lang.org/json/index.html#%28tech._jsexpr%29" class="techoutside" data-pltdoc="x"><span class="techinside">jsexpr</span></a>
containing details of all <a href="API_documentation.html#%28tech._assignment%29" class="techoutside" data-pltdoc="x"><span class="techinside">assignments</span></a>.</div></p><p>The return value is a list of assignments. Each assignment is a dictionary with the
following keys and values.</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p>Key</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p>JSON type of value</p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;</span></p></td><td align="right" style="border-bottom: 1px solid black;"><p>Example</p></td></tr><tr><td><p><span class="stt">id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>19858217</p></td></tr><tr><td><p><span class="stt">project_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>1824209</p></td></tr><tr><td><p><span class="stt">person_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>399979</p></td></tr><tr><td><p><span class="stt">placeholder_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">null</span></p></td></tr><tr><td><p><span class="stt">start_date</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2019-01-01</p></td></tr><tr><td><p><span class="stt">end_date</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2019-05-31</p></td></tr><tr><td><p><span class="stt">allocation</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>14400</p></td></tr><tr><td><p><span class="stt">notes</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>Assuming allocation approved.</p></td></tr><tr><td><p><span class="stt">repeated_assignment_set_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">null</span></p></td></tr><tr><td><p><span class="stt">active_on_days_off</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">boolean</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p><span class="stt">false</span></p></td></tr><tr><td><p><span class="stt">updated_at</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">string</span> (timestamp)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>2019-03-12T16:28:59.727Z</p></td></tr><tr><td><p><span class="stt">updated_by_id</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic">numeric</span> (integer)</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td align="right"><p>408182</p></td></tr></table></p><p><span class="stt">project_id</span> and <span class="stt">person_id</span> identify the <span class="emph">project</span> and <span class="emph">person</span>
respectively. A <span class="stt">placholder_id</span> identifies a <span class="emph">placeholder</span>, which is a
Forecast entity that serves to allocate time with allocating an individual. We
use placeholders to reserve time for partners (where we don&rsquo;t know the
particular individual) or to indicate that some resource is required at a
certain time.</p><p>The <span class="stt">allocation</span> is the time, in seconds per day, allocated to this project
each working day of the assignment. Since we use a nominal eight-hour day, an
<span class="stt">allocation</span> of 14,400 indicates a 50% allocation.</p><p>Forecast allows one to create an assignment that is for specific days of the
week, repeated for a certain number of weeks. The
<span class="stt">repeated_assignment_set_id</span> is (presumably) a link to a separate record that
indicates which days of the week and for how long. We do not use this feature.</p><p>Finally, <span class="stt">active_on_days_off</span> is a flag to indicate whether this assignment
includes, for example, weekends. We do not use this feature, either.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Backends.html" title="backward to &quot;5 Backends&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;whatnow: Hut23 project scheduling&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>